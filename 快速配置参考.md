# ECH-Workers 快速配置参考表

## 📝 配置参数对照表

### Worker 管理面板配置

| 配置项 | 示例值 | 说明 |
|--------|--------|------|
| UUID | `d50b4326-41b4-455b-899f-9452690286fe` | 从 3X-UI 复制 |
| Worker 域名 | `ech.yourdomain.com` | 你的 Worker 域名 |
| WS 路径 | `/echws` | 与后端一致 |
| 后端 VPS 域名 | `1.2.3.4` 或 `vps.yourdomain.com` | VPS IP 或域名 |
| 后端端口 | `2082` | 与后端一致 |
| WebSocket 模式 | `方式 A（稳定型）` | 推荐使用方式 A |

### 3X-UI 后端配置

| 配置项 | 值 | 说明 |
|--------|-----|------|
| 协议 | `VLESS` | 必须选择 VLESS |
| 端口 | `2082` | 自定义端口，需与 Worker 一致 |
| UUID | `d50b4326-41b4-455b-899f-9452690286fe` | 生成或自定义，需与 Worker 一致 |
| 传输协议 | `WebSocket` | 必须选择 WebSocket |
| 路径 | `/echws` | 自定义路径，需与 Worker 一致 |
| TLS | ❌ **关闭** | **重要：必须关闭** |
| 加密 | `none` | VLESS 默认加密方式 |

### v2rayN 订阅配置

| 配置项 | 值 | 说明 |
|--------|-----|------|
| 订阅地址 | `https://ech.yourdomain.com/sub` | Worker 域名 + /sub |
| 更新方式 | `不通过代理` | 首次更新建议不通过代理 |

---

## 🔧 常用命令

### VPS 端检查命令

```bash
# 检查 Xray 服务状态
systemctl status xray

# 检查端口是否监听
netstat -tlnp | grep 2082
# 或
ss -tlnp | grep 2082

# 查看 Xray 日志
journalctl -u xray -f

# 重启 Xray 服务
systemctl restart xray
```

### 防火墙配置

```bash
# Ubuntu/Debian
sudo ufw allow 2082/tcp
sudo ufw status

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=2082/tcp
sudo firewall-cmd --reload
sudo firewall-cmd --list-ports
```

---

## 📋 配置检查清单

### 第一步：Worker 配置
- [ ] Worker 已部署
- [ ] 环境变量已设置（ADMIN_PASSWORD、SESSION_SECRET）
- [ ] 管理面板可访问
- [ ] UUID 已填写（与 3X-UI 一致）
- [ ] 后端端口已填写（与 3X-UI 一致）
- [ ] WS 路径已填写（与 3X-UI 一致）

### 第二步：3X-UI 配置
- [ ] VLESS 入站已创建
- [ ] 端口配置正确
- [ ] UUID 配置正确
- [ ] WebSocket 传输已启用
- [ ] 路径配置正确
- [ ] TLS 已关闭
- [ ] Xray 服务运行中

### 第三步：网络检查
- [ ] 防火墙已开放端口
- [ ] VPS 端口可访问
- [ ] Worker 可访问后端

### 第四步：客户端配置
- [ ] v2rayN 已安装
- [ ] 订阅链接已添加
- [ ] 订阅已更新
- [ ] 节点已选择
- [ ] 代理已开启

---

## ⚠️ 常见错误及解决方法

### 错误 "-1"

**原因：** Worker 无法连接后端

**解决步骤：**
1. 检查后端端口是否正确
2. 检查 WS 路径是否一致
3. 检查防火墙是否开放
4. 检查 Xray 服务是否运行
5. 检查后端域名/IP 是否正确

### 无法访问管理面板

**解决步骤：**
1. 检查环境变量 ADMIN_PASSWORD 是否设置
2. 清除浏览器 Cookie
3. 检查 Worker 是否正常部署

### 订阅链接无法访问

**解决步骤：**
1. 检查 Worker 域名是否正确
2. 直接访问 `https://你的域名/sub` 测试
3. 检查 Worker 日志

### v2rayN 无法连接

**解决步骤：**
1. 检查节点配置是否正确
2. 检查系统代理是否开启
3. 查看 v2rayN 日志
4. 尝试更新订阅

---

## 🔗 重要链接

- **Cloudflare Dashboard**: https://dash.cloudflare.com/
- **3X-UI GitHub**: https://github.com/MHSanaei/3x-ui
- **v2rayN GitHub**: https://github.com/2dust/v2rayN
- **Worker 管理面板**: `https://你的域名/`

---

## 💡 提示

1. **端口选择**：建议使用 2082、443、80 等常见端口
2. **路径选择**：建议使用 `/echws`、`/ws`、`/path` 等
3. **UUID 生成**：可以使用在线 UUID 生成器或命令行生成
4. **测试连接**：配置完成后，先测试连接再正式使用

---

**快速配置完成！** 🎉

